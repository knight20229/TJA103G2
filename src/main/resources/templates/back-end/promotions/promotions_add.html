<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新增促銷活動</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" />

    <!-- Font Awesome Free 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
	
	<link rel="stylesheet" th:href="@{/css/back-end-index.css}" />

    <link rel="stylesheet" th:href="@{/css/promotions/promotions_add_edit.css}" />
</head>

<body>
    <!-- ========== 左側側邊欄 ========== -->
	<nav class="sidebar">
		<a class="mb-4 fs-4 text-decoration-none fw-bold"
			th:href="@{/back-end}">後台管理</a>
			
		<div
			class="mb-4 px-3 py-2 bg-light rounded shadow-sm border-start border-4 border-primary">
			<div th:if="${session.employeeId != null}">
				<div class="d-flex align-items-center mb-1">
					<i class="bi bi-person-badge-fill text-primary me-2 fs-5"></i> <span
						class="fw-bold text-dark" th:text="${session.employeeName}">管理員姓名</span>
				</div>
				<div class="text-muted" style="font-size: 0.85rem;">
					ID: <span th:text="${session.employeeId}">0</span>
				</div>
			</div>

			<div th:if="${session.employeeId == null}" class="py-1">
				<i class="bi bi-person-exclamation text-warning me-1"></i> <span
					class="text-muted small">尚未登入系統</span>
			</div>
		</div>

		<ul class="nav flex-column">
			<li class="nav-item"><a class="nav-link fs-5"
				th:href="@{/admin/mem/list}">會員管理</a></li>

			<!-- 折疊選單 -->
			<li class="nav-item fs-5"><a
				class="nav-link d-flex justify-content-between align-items-center "
				data-bs-toggle="collapse" href="#menu_products">商品管理<i
					class="bi bi-chevron-down"></i>
			</a>
				<div class="collapse fs-6" id="menu_products">
					<ul class="nav flex-column ms-3">
						<li><a class="nav-link" th:href="@{/prod/listAllProd}">商品列表</a></li>
						<li><a class="nav-link" th:href="@{/prod/addProd}">新增商品</a></li>
					</ul>
				</div></li>

			<!-- 訂單管理 -->
			<li class="nav-item fs-5"><a
				class="nav-link d-flex justify-content-between align-items-center "
				data-bs-toggle="collapse" href="#menu_orders">訂單管理<i
					class="bi bi-chevron-down"></i>
			</a>

				<div class="collapse fs-6" id="menu_orders">
					<ul class="nav flex-column ms-3">
						<li><a class="nav-link" th:href="@{/orders/list}">訂單紀錄</a></li>
						<li><a class="nav-link" th:href="@{/returns/list}">退貨處理</a></li>
					</ul>
				</div></li>
			<!-- 活動管理 -->
			<li class="nav-item fs-5"><a
				class="nav-link d-flex justify-content-between align-items-center "
				data-bs-toggle="collapse" href="#menu_activity">活動管理<i
					class="bi bi-chevron-down"></i>
			</a>

				<div class="collapse fs-6 show" id="menu_activity">
					<ul class="nav flex-column ms-3">
						<li><a class="nav-link" th:href="@{/coupon/getAllCoupon}">優惠券管理</a></li>
						<li><a class="nav-link"
							th:href="@{/promotions/getAllPromotions}">促銷活動管理</a></li>
					</ul>
				</div></li>
		</ul>

		<div class="mt-4 d-flex justify-content-center logout-wrapper">

			<button th:if="${session.employeeId != null}" type="button"
				class="btn btn-primary w-50 fw-bold btn-logout"
				data-bs-toggle="modal" data-bs-target="#logoutModal">
				<i class="bi bi-box-arrow-right"></i> 登出
			</button>

			<a th:if="${session.employeeId == null}" href="javascript:void(0)"
				th:data-login-url="@{/emp/login}" onclick="loginWithLocation(this)"
				class="btn btn-primary w-50 fw-bold"> <i
				class="bi bi-box-arrow-in-right"></i> 登入
			</a>

		</div>
	</nav>

    <!-- ========== 主內容區 ========== -->
    <main>
        <!-- 麵包屑 -->
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb d-flex align-items-center no-bg">
				<li class="breadcrumb-item"><a th:href="@{/back-end}"
					class="fs-4 text-primary text-decoration-none fw-bold breadcrumb_index"><i
						class="bi bi-house-door-fill me-1"></i>後台管理</a></li>
				<li class="breadcrumb-item"><a th:href="@{/promotions/getAllPromotions}"
					class="fs-5 text-primary text-decoration-none fw-bold breadcrumb_index">促銷活動管理</a>
				</li>
				<li class="breadcrumb-item active">新增促銷活動</li>
			</ol>
		</nav>
        <hr class="border border-primary border-2" />

        <form class="row g-3" th:action="@{insert}" method="post" th:object="${promotionsVO}" enctype="application/x-www-form-urlencoded">
            <div class="col-12">
                <label for="inputPromotionsName" class="form-label">促銷活動名稱</label>
                <input type="text" th:field="*{name}" class="form-control" id="inputPromotionsName">
                <span th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <label for="inputType" class="form-label">折扣方式</label>
                <select id="inputType" class="form-select" th:field="*{type}">
                    <option value="AMOUNT">固定金額</option>
                    <option value="PERCENT">百分比</option>
                </select>
                <span th:if="${#fields.hasErrors('type')}" th:errors="*{type}" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <label for="inputPromotionsValue" class="form-label">折扣金額/折扣率</label>
                <input type="text" th:field="*{promotionsValue}" class="form-control" id="inputPromotionsValue">
            	<span th:if="${#fields.hasErrors('promotionsValue')}" th:errors="*{promotionsValue}" class="text-danger"></span>
            </div>
            <div class="col-12">
                <label for="inputNarrate" class="form-label">活動說明</label>
                <input type="text" th:field="*{narrate}" class="form-control" id="inputNarrate">
                <span th:if="${#fields.hasErrors('narrate')}" th:errors="*{narrate}" class="text-danger"></span>
            </div>
            <div class="col-md-4">
                <label for="inputDate" class="form-label">開始日期</label>
                <input type="date" th:field="*{startDt}" class="form-control" id="inputDate">
                <span th:if="${#fields.hasErrors('startDt')}" th:errors="*{startDt}" class="text-danger"></span>
            </div>
            <div class="col-md-4">
                <label for="inputEndDate" class="form-label">結束日期</label>
                <input type="date" th:field="*{endDt}" class="form-control" id="inputEndDate">
                <span th:if="${#fields.hasErrors('endDt')}" th:errors="*{endDt}" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <div>
                    <span>促銷活動狀態</span>
                </div>
                <div class="form-check div3" id="div_state_on">
                    <input class="form-check-input" th:field="*{state}" value="1" name="state" type="radio" id="state_on">
                    <label class="form-check-label" for="state_on">
                        啟用
                    </label>
                </div>
                <div class="form-check div3" id="div_state_off">
                    <input class="form-check-input" th:field="*{state}" value="0" name="state" type="radio" id="state_off">
                    <label class="form-check-label" for="state_off">
                        停用
                    </label>
                </div>
                <div>
                    <span th:if="${#fields.hasErrors('state')}" th:errors="*{state}" class="text-danger"></span>
                </div>
            </div>
            <div>
				<span>員工編號</span> <input type="text" th:value="${session.employeeId}"
					class="form-control" id="inputEmployeeId" readonly> 
			</div>
            <div class="col-12 gap-4 d-md-flex justify-content-md-end">
                <button type="submit" class="btn btn-primary" id="submit">儲存</button>
                <button type="button" class="btn btn-primary" id="cancel">取消</button>
            </div>
        </form>
        
        <!--登出確認Model -->
		<div class="modal fade" id="logoutModal" tabindex="-1"
			aria-labelledby="logoutModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="logoutModalLabel">確認登出</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
					</div>
					<div class="modal-body">你確定要登出嗎？</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">取消</button>
						<button type="button" class="btn btn-danger"
							th:onclick="|window.location.href='@{/emp/logout}'|">
							確定登出</button>
					</div>
				</div>
			</div>
		</div>

    </main>

    <!-- JS 套件 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>  
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script th:src="@{/js/promotions/promotions_add.js}"></script>


</body>

</html>