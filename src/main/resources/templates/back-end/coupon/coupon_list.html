<!DOCTYPE html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>優惠券列表</title>

<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet" />

<!-- Bootstrap Icons -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" />

<!-- Font Awesome Free 6 -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

<link rel="stylesheet" th:href="@{/css/back-end-index.css}" />


<link rel="stylesheet" th:href="@{/css/coupon/coupon_list.css}" />
</head>

<body>
    <!-- ========== 左側側邊欄 ========== -->
	<nav class="sidebar">
		<a class="mb-4 fs-4 text-decoration-none fw-bold"
			th:href="@{/back-end}">後台管理</a>

		<ul class="nav flex-column">
			<li class="nav-item"><a class="nav-link fs-5"
				th:href="@{/admin/mem/list}">會員管理</a></li>

			<!-- 折疊選單 -->
			<li class="nav-item fs-5"><a
				class="nav-link d-flex justify-content-between align-items-center "
				data-bs-toggle="collapse" href="#menu_products">商品管理<i
					class="bi bi-chevron-down"></i>
			</a>
				<div class="collapse fs-6" id="menu_products">
					<ul class="nav flex-column ms-3">
						<li><a class="nav-link" th:href="@{/prod/listAllProd}">商品列表</a></li>
						<li><a class="nav-link" th:href="@{/prod/addProd}">新增商品</a></li>
					</ul>
				</div></li>

			<!-- 訂單管理 -->
			<li class="nav-item fs-5"><a
				class="nav-link d-flex justify-content-between align-items-center "
				data-bs-toggle="collapse" href="#menu_orders">訂單管理<i
					class="bi bi-chevron-down"></i>
			</a>

				<div class="collapse fs-6" id="menu_orders">
					<ul class="nav flex-column ms-3">
						<li><a class="nav-link" th:href="@{/orders/list}">訂單紀錄</a></li>
						<li><a class="nav-link" th:href="@{/returns/list}">退貨處理</a></li>
					</ul>
				</div></li>
			<!-- 活動管理 -->
			<li class="nav-item fs-5"><a
				class="nav-link d-flex justify-content-between align-items-center "
				data-bs-toggle="collapse" href="#menu_activity">活動管理<i
					class="bi bi-chevron-down"></i>
			</a>

				<div class="collapse fs-6 show" id="menu_activity">
					<ul class="nav flex-column ms-3">
						<li><a class="nav-link" th:href="@{/coupon/getAllCoupon}">優惠券管理</a></li>
						<li><a class="nav-link"
							th:href="@{/promotions/getAllPromotions}">促銷活動管理</a></li>
					</ul>
		</ul>

		<div class="mt-4 d-flex justify-content-center logout-wrapper">

			<button th:if="${session.employeeId != null}" type="button"
				class="btn btn-primary w-50 fw-bold btn-logout"
				data-bs-toggle="modal" data-bs-target="#logoutModal">
				<i class="bi bi-box-arrow-right"></i> 登出
			</button>

			<a th:if="${session.employeeId == null}" href="javascript:void(0)"
				th:data-login-url="@{/emp/login}" onclick="loginWithLocation(this)"
				class="btn btn-primary w-50 fw-bold"> <i
				class="bi bi-box-arrow-in-right"></i> 登入
			</a>

		</div>
	</nav>

	<!-- ========== 主內容區 ========== -->
	<main>
		<!-- 麵包屑 -->
		<nav aria-label="breadcrumb" class="d-flex align-items-center mb-3">
			<ol class="breadcrumb mb-0 no-bg me-3 d-flex align-items-center">
				<li class="breadcrumb-item"><a th:href="@{/back-end}"
					class="fs-4 text-primary text-decoration-none fw-bold breadcrumb_index"><i
						class="bi bi-house-door-fill me-1"></i>後台管理</a></li>
				<li class="breadcrumb-item"><a th:href="@{/coupon/getAllCoupon}"
					class="fs-5 text-primary text-decoration-none fw-bold breadcrumb_index">優惠券管理</a>
				</li>
			</ol>
			
			<a th:href="@{/coupon/addCoupon}" class="btn btn-primary fw-bold"> <i
				class="fa-solid fa-plus"></i> 新增優惠券
			</a>
		</nav>


		<hr class="border border-primary border-2" />

		<div class="card-body p-0">
			<table class="table table-striped projects">
				<thead>
					<tr>
						<th style="width: 9%" class="text-center">優惠券<br>編號
						</th>
						<th style="width: 15%" class="text-center">名稱</th>
						<th style="width: 10%" class="text-center">折扣金額/<br>折扣率
						</th>
						<th style="width: 10%" class="text-center">使用門檻</th>
						<th style="width: 15%" class="text-center">有效日期</th>
						<th style="width: 10%" class="text-center">啟用狀態<br>(啟用/停用)
						</th>
						<th style="width: 9%" class="text-center">員工編號</th>
						<th style="width: 23%"></th>
					</tr>
				</thead>
				<tbody>
					<th:block th:each="couponVO : ${couponList}">
						<tr>
							<td th:text="${couponVO.couponId}"></td>
							<td th:text="${couponVO.name}"></td>
							<td th:text="${couponVO.couponValue}"></td>
							<td th:text="${couponVO.standard}"></td>
							<td><span th:text="${couponVO.startDt}"> </span> <span>~</span>
								<span th:text="${couponVO.endDt}"></span></td>
							<td th:text="${couponVO.state == 0 ? '停用' : '啟用'}"></td>
							<td th:text="${couponVO.empVO.employeeId}"></td>
							<td class="project-actions text-right">
								<a class="btn btn-primary btn-sm" th:href="@{/coupon/viewCoupon(couponId=${couponVO.couponId})}">
									<i class="fas fa-folder"> </i> View </a>
								<a class="btn btn-info btn-sm" th:if="${couponVO.sendTime == null}" th:href="@{/coupon/getOneForUpdate(couponId=${couponVO.couponId})}">
										<i class="fas fa-pencil-alt"> </i> Edit</a>
							</td>
						</tr>
					</th:block>
				</tbody>
			</table>
		</div>

	</main>

	<!-- JS 套件 -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	
</body>

</html>