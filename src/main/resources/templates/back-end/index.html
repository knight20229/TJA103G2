<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>後台管理</title>

<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet" />

<!-- Bootstrap Icons -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" />

<!-- Font Awesome Free 6 -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

<link rel="stylesheet" th:href="@{/css/back-end-index.css}" />
</head>
<body>
	<!-- ========== 左側側邊欄 ========== -->
	<nav class="sidebar">
		<h5 class="mb-4 fs-4 text-decoration-none fw-bold"
			th:href="@{/back-end}">後台管理</h5>

		<div
			class="mb-4 px-3 py-2 bg-light rounded shadow-sm border-start border-4 border-primary">
			<div th:if="${session.employeeId != null}">
				<div class="d-flex align-items-center mb-1">
					<i class="bi bi-person-badge-fill text-primary me-2 fs-5"></i> <span
						class="fw-bold text-dark" th:text="${session.employeeName}">管理員姓名</span>
				</div>
				<div class="text-muted" style="font-size: 0.85rem;">
					ID: <span th:text="${session.employeeId}">0</span>
				</div>
			</div>

			<div th:if="${session.employeeId == null}" class="py-1">
				<i class="bi bi-person-exclamation text-warning me-1"></i> <span
					class="text-muted small">尚未登入系統</span>
			</div>
		</div>

		<ul class="nav flex-column">
			<li class="nav-item"><a class="nav-link fs-5"
				th:href="@{/admin/mem/list}">會員管理</a></li>

			<!-- 折疊選單 -->
			<li class="nav-item fs-5"><a
				class="nav-link d-flex justify-content-between align-items-center "
				data-bs-toggle="collapse" href="#menu_products">商品管理<i
					class="bi bi-chevron-down"></i>
			</a>
				<div class="collapse fs-6" id="menu_products">
					<ul class="nav flex-column ms-3">
						<li><a class="nav-link" th:href="@{/prod/listAllProd}">商品列表</a></li>
						<li><a class="nav-link" th:href="@{/prod/addProd}">新增商品</a></li>
					</ul>
				</div></li>

			<!-- 訂單管理 -->
			<li class="nav-item fs-5"><a
				class="nav-link d-flex justify-content-between align-items-center "
				data-bs-toggle="collapse" href="#menu_orders">訂單管理<i
					class="bi bi-chevron-down"></i>
			</a>

				<div class="collapse fs-6" id="menu_orders">
					<ul class="nav flex-column ms-3">
						<li><a class="nav-link" th:href="@{/orders/list}">訂單紀錄</a></li>
						<li><a class="nav-link" th:href="@{/returns/list}">退貨處理</a></li>
					</ul>
				</div></li>
			<!-- 活動管理 -->
			<li class="nav-item fs-5"><a
				class="nav-link d-flex justify-content-between align-items-center "
				data-bs-toggle="collapse" href="#menu_activity">活動管理<i
					class="bi bi-chevron-down"></i>
			</a>

				<div class="collapse fs-6" id="menu_activity">
					<ul class="nav flex-column ms-3">
						<li><a class="nav-link" th:href="@{/coupon/getAllCoupon}">優惠券管理</a></li>
						<li><a class="nav-link"
							th:href="@{/promotions/getAllPromotions}">促銷活動管理</a></li>
					</ul>
				</div></li>
		</ul>

		<div class="mt-4 d-flex justify-content-center logout-wrapper">

			<button th:if="${session.employeeId != null}" type="button"
				class="btn btn-primary w-50 fw-bold btn-logout"
				data-bs-toggle="modal" data-bs-target="#logoutModal">
				<i class="bi bi-box-arrow-right"></i> 登出
			</button>

			<a th:if="${session.employeeId == null}" href="javascript:void(0)"
				th:data-login-url="@{/emp/login}" onclick="loginWithLocation(this)"
				class="btn btn-primary w-50 fw-bold"> <i
				class="bi bi-box-arrow-in-right"></i> 登入
			</a>

		</div>
	</nav>

	<!-- ========== 主內容區 ========== -->
	<main>
		<div class="container py-5">
			<div class="row mb-4">
				<div class="col">
					<h2 class="fw-bold text-secondary">後台管理</h2>
					<p class="text-muted">請選擇要管理的項目</p>
				</div>
			</div>

			<div class="row g-3 justify-content-center mx-auto" style="max-width: 900px;">				<div class="col-12 col-md-4 col-lg-6">
					<a th:href="@{/admin/mem/list}" class="text-decoration-none h-100">
						<div class="card h-100 shadow-sm admin-card">
							<div
								class="card-body d-flex flex-column align-items-center justify-content-center py-4">
								<div class="icon-box bg-primary bg-opacity-10 mb-3">
									<i class="bi bi-people-fill text-primary fs-3"></i>
								</div>
								<div class="text-center">
									<h5 class="mb-2 fw-bold text-dark">會員管理</h5>
									<small class="text-muted fw-bold">總會員數：<span
										th:text="${memCount}"
										class="badge rounded-pill bg-primary text-white fw-bold">0</span></small>
								</div>
							</div>
						</div>
					</a>
				</div>

				<div class="col-12 col-md-4 col-lg-6">
					<a th:href="@{/prod/listAllProd}"
						class="text-decoration-none h-100">
						<div class="card h-100 shadow-sm admin-card">
							<div
								class="card-body d-flex flex-column align-items-center justify-content-center py-4">
								<div class="icon-box bg-success bg-opacity-10 mb-3">
									<i class="bi bi-box-seam-fill text-success fs-3"></i>
								</div>
								<div class="text-center">
									<h5 class="mb-2 fw-bold text-dark">商品管理</h5>
									<small class="text-muted fw-bold">商品總數：<span
										th:text="${prodCount}"
										class="badge rounded-pill bg-success text-white fw-bold">0</span></small>
								</div>
							</div>
						</div>
					</a>
				</div>

				<div class="col-12 col-md-4 col-lg-6">
					<div class="card h-100 shadow-sm admin-card border-0">
						<div
							class="card-body d-flex flex-column align-items-center justify-content-center py-4">

							<div class="d-flex flex-column align-items-center mb-3">
								<div class="icon-box bg-info bg-opacity-10 mb-2">
									<i class="bi bi-receipt text-info fs-3"></i>
								</div>
								<h5 class="mb-0 fw-bold text-dark">訂單管理</h5>
							</div>

							<div class="row g-2 w-100">
								<div class="col-6">
									<a th:href="@{/orders/list}"
										class="btn btn-info w-100 py-3 d-flex flex-column align-items-center shadow-sm border-2">
										<i class="bi bi-clipboard-data mb-1 fs-4"></i> <span
										class="fw-bold">訂單紀錄</span>
										<div class="mt-1">
											<span class="small opacity-75 fw-bold">訂單數量：</span> <span
												class="badge rounded-pill bg-dark text-white fw-bold"
												th:text="${orderCount}">0</span>
										</div>
									</a>
								</div>
								<div class="col-6">
									<a th:href="@{/returns/list}"
										class="btn btn-info w-100 py-3 d-flex flex-column align-items-center shadow-sm border-2">
										<i class="bi bi-box-arrow-left mb-1 fs-4"></i> <span
										class="fw-bold">退貨處理</span>
										<div class="mt-1">
											<span class="small opacity-75 fw-bold">退貨訂單：</span> <span
												class="badge rounded-pill bg-dark text-white fw-bold"
												th:text="${returnCount}">0</span>
										</div>
									</a>
								</div>
							</div>

						</div>
					</div>
				</div>

				<div class="col-12 col-md-4 col-lg-6">
					<div class="card h-100 shadow-sm admin-card border-0">
						<div
							class="card-body d-flex flex-column align-items-center justify-content-center py-4">

							<div class="d-flex flex-column align-items-center mb-3">
								<div class="icon-box bg-warning bg-opacity-10 mb-2">
									<i class="bi bi-calendar-event-fill text-warning fs-3"></i>
								</div>
								<h5 class="mb-0 fw-bold text-dark">活動管理</h5>
							</div>

							<div class="row g-2 w-100">
								<div class="col-6">
									<a th:href="@{/coupon/getAllCoupon}"
										class="btn btn-warning w-100 py-3 d-flex flex-column align-items-center shadow-sm sub-management-btn">
										<i class="bi bi-ticket-perforated-fill mb-1 fs-4"></i> <span
										class="fw-bold">優惠券管理</span>
										<div class="mt-1">
											<span class="small opacity-75 fw-bold">優惠券數量：</span> <span
												class="badge rounded-pill bg-dark text-white fw-bold"
												th:text="${CouponCount}">0</span>
										</div>
									</a>
								</div>
								<div class="col-6">
									<a th:href="@{/promotions/getAllPromotions}"
										class="btn btn-warning w-100 py-3 d-flex flex-column align-items-center shadow-sm sub-management-btn">
										<i class="bi bi-megaphone-fill mb-1 fs-4"></i> <span
										class="fw-bold">促銷活動管理</span>
										<div class="mt-1">
											<span class="small opacity-75 fw-bold">活動數量：</span> <span
												class="badge rounded-pill bg-dark text-white fw-bold"
												th:text="${PromotionCount}">0</span>
										</div>
									</a>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>

		<!--登出確認Model -->
		<div class="modal fade" id="logoutModal" tabindex="-1"
			aria-labelledby="logoutModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="logoutModalLabel">確認登出</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
					</div>
					<div class="modal-body">你確定要登出嗎？</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">取消</button>
						<button type="button" class="btn btn-danger"
							th:onclick="|window.location.href='@{/emp/logout}'|">
							確定登出</button>
					</div>
				</div>
			</div>
		</div>
	</main>

	<!-- JS 套件 -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	<script th:src="@{/js/product_listAll.js}"></script>
</body>
</html>
