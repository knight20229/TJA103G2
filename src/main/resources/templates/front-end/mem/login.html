<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>夢享家 DreamHouse</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Favicon -->
<link th:href="@{/images/dreamhouseb.ico}" rel="icon">>

<!-- Vendor CSS -->
<link th:href="@{/css/vendors.css}" rel="stylesheet">
<!-- Main CSS -->
<link th:href="@{/css/style.css}" rel="stylesheet">
<!-- Header CSS -->
<link th:href="@{/css/header.css}" rel="stylesheet">
<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<!-- Font Awesome -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>

<body>
	<!-- ================= Header ================= -->
	<div th:replace="~{front-end/layout :: header}"></div>


	<div class="page-content-wrapper">
		<div class="myaccount-wrapper">
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-lg-6 col-md-8 col-sm-12">

						<!-- 登入表單 -->
						<form id="login-form" th:action="@{/mem/login}" method="post"
							th:object="${loginForm}">
							<div class="login-form">
								<h4 class="login-title">登入</h4>

								<!-- 驗證成功提示 -->
								<div th:if="${verified != null}" class="alert alert-success"
									role="alert">驗證成功！請輸入帳號密碼登入。</div>

								<!-- 尚未驗證提示 -->
								<div
									th:if="${errorMsg != null and errorMsg.equals('UNVERIFIED')}"
									class="alert alert-warning" role="alert">
									帳號尚未完成驗證，請至信箱點擊驗證連結。
									<button type="button" class="btn btn-link"
										onclick="document.getElementById('resendForm').submit()">重寄驗證信</button>
								</div>

								<!-- 帳號 -->
								<label for="account">帳號</label> <input type="text" id="account"
									th:field="*{account}" placeholder="帳號" required /> <span
									th:if="${#fields.hasErrors('account')}" th:errors="*{account}"
									class="error-hint"></span>

								<!-- 密碼 -->
								<label for="password">密碼</label> <input type="password"
									id="password" th:field="*{password}" placeholder="密碼" required />
								<span th:if="${#fields.hasErrors('password')}"
									th:errors="*{password}" class="error-hint"></span>

								<!-- 驗證碼 -->
								<div class="captcha-wrapper">
									<label for="captcha">驗證碼</label> <input type="text"
										id="captcha" name="captcha" required /> <img
										th:src="@{/captcha}" alt="驗證碼"
										onclick="this.src='/captcha?'+Math.random()" />
								</div>

								<!-- 全域錯誤訊息 -->
								<small
									th:if="${errorMsg != null and !errorMsg.equals('UNVERIFIED')}"
									class="error-hint" th:text="${errorMsg}"></small>

								<!-- 忘記密碼 -->
								<a th:href="@{/mem/forgot-password}" class="forget-pass-link">忘記密碼</a>

								<!-- 按鈕區 -->
								<div class="button-group">
									<button type="submit" class="theme-button login">登入</button>
									<a th:href="@{/mem/register}" class="theme-button register">註冊</a>
								</div>
							</div>
						</form>

						<!-- 隱藏的重寄表單，移到 login-form 外面 -->
						<form id="resendForm" th:action="@{/mem/resend-verification}"
							method="post" style="display: none;">
							<input type="hidden" name="email" th:value="${email}" />
						</form>

					</div>
				</div>
			</div>
		</div>
	</div>
	<!--====================  End of page content wrapper  ====================-->




	<!-- JS files -->
	<script th:src="@{/js/vendors.js}"></script>
	<script th:src="@{/js/active.js}"></script>
	<script th:src="@{/js/search.js}"></script>
</body>
</html>