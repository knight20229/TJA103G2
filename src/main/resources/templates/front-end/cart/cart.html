<!DOCTYPE html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>購物車 - 夢享家 DreamHouse</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="icon" th:href="@{/images/dreamhouseb.ico}">
<link rel="stylesheet"
	th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css}">
<link rel="stylesheet" th:href="@{/css/vendors.css}">
<link rel="stylesheet" th:href="@{/css/style.css}">
<link rel="stylesheet" th:href="@{/css/cart.css}">
</head>

<body>

	<!-- ================= Header ================= -->
	<div
		class="header-area header-area--default header-area--default--white header-sticky">

		<div
			class="header-navigation-area header-navigation-area--white header-navigation-area--extra-space d-none d-lg-block">
			<div class="container wide">
				<div class="row">
					<div class="col-lg-12">

						<div class="header-info-wrapper header-info-wrapper--alt-style">

							<div class="header-logo">
								<a th:href="@{/}"> <img th:src="@{/images/logo.png}"
									class="img-fluid" alt="">
								</a>
							</div>

							<div class="header-navigation-wrapper">
								<nav>
									<ul>
										<li><a th:href="@{/product/list}">商品瀏覽</a></li>
										<li><a th:href="@{/compare}">商品比較</a></li>
										<li><a th:href="@{/custom}">客製化商品</a></li>
										<li><a th:href="@{/article}">好眠知識</a></li>
									</ul>
								</nav>
							</div>

							<nav class="navbar navbar-expand-lg navbar-light bg-light">
								<div class="container-fluid">
									<form class="d-flex" th:action="@{/product/search}"
										method="get">
										<input class="form-control me-2" type="search" name="keyword"
											placeholder="搜尋商品">
										<button class="btn btn-outline-success" type="submit">Search</button>
									</form>
								</div>
							</nav>

							<div class="header-icon-area">
								<ul class="header-icon__list">
									<li><i class="fa-solid fa-message" style="color: #B197FC"></i></li>
									<li><i class="fa-solid fa-user" style="color: #B197FC"></i></li>
									<li><i class="fa-solid fa-bell" style="color: #B197FC"></i></li>
									<li><a th:href="@{/cart/getCart(memberId=${session.memberId})}"> <i
											class="fa-solid fa-cart-shopping" style="color: #B197FC"></i>
									</a></li>
								</ul>
							</div>

						</div>

					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- ================= Main ================= -->
	<main class="p-4"></main>

	<!-- ===== 購物車有商品 ===== -->
	<div id="cart-content" th:if="${not #lists.isEmpty(cartItems)}">
		<div class="container">
			<h1 class="mb-3">購物車</h1>

			<table class="cart-table">
				<thead>
					<tr>
						<th>商品名稱</th>
						<th>數量</th>
						<th>單價</th>
						<th>小計</th>
						<th>操作</th>
						<th class=hidden></th>
						<th class=hidden></th>
					</tr>
				</thead>

				<tbody>
					<tr th:each="item : ${cartItems}">
					
					
						<td th:text="${item.productName}">商品名稱</td>
						<td th:text="${item.quantity}">1</td>
						<td>$<span th:text="${item.price}">0</span></td>
						<td>$<span th:text="${item.price * item.quantity}">0</span>
						</td>
						<td><a th:href="@{/cart/removeItem(memberId=${session.memberId}, itemKey=${item.itemKey})}"
							class="btn btn-sm btn-danger"> 移除 </a></td>
						<td th:value="${item.itemKey}"></td>
						<td th:value="${item.productId}"></td>
					</tr>
				</tbody>
			</table>

			<div class="cart-total">
				總計: $<span th:text="${cartTotal}">0</span>
			</div>

			<div class="text-end mt-4">
				<a th:href="@{/checkout}" class="btn btn-warning px-4">前往結帳</a>
			</div>
		</div>
	</div>

	<!-- ===== 購物車為空 ===== -->
	<div id="cart-empty" class="cart-empty"
		th:if="${#lists.isEmpty(cartItems)}">
		<i class="fa-solid fa-cart-shopping"></i>
		<h2>您的購物車是空的</h2>
		<p>快去挑選適合您的好眠商品吧！</p>
		<a th:href="@{/product/list}" class="theme-button">前往商品頁</a>
	</div>

	<script
		th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js}"></script>
</body>

</html>
